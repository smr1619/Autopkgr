<recipe>
  <identifier>com.github.smr1619.pgadmin.sr.jamf.recipe</identifier>
  <description>Downloads the latest version of pgAdmin 4 for macOS.</description>
  <input>
    <key>NAME</key>
    <string>pgAdmin 4</string>
    <key>URL</key>
    <string>https://www.pgadmin.org/download/pgadmin-4-macos/</string>
  </input>
  <process>
    <step>
      <script>#!/bin/bash
      # Get the download URL for the latest version of pgAdmin 4 for macOS
      url=$(curl -s https://www.pgadmin.org/download/pgadmin-4-macos/ | grep -o 'https://ftp.postgresql.org/pub/pgadmin/pgadmin4/v[0-9]\.[0-9]\.[0-9]/macos/pgadmin4-[0-9]\.[0-9]\.[0-9]-[0-9]\.dmg')
      # Download the latest version of pgAdmin 4 for macOS
      curl -L -o pgadmin4.dmg $url
      # Output the path to the downloaded file
      echo "$PWD/pgadmin4.dmg"
      </script>
      <description>Download the latest version of pgAdmin 4 for macOS.</description>
    </step>
  </process>
  <output>
    <array>
      <dict>
        <key>NAME</key>
        <string>pgadmin4.dmg</string>
        <key>PATH</key>
        <string>pgadmin4.dmg</string>
      </dict>
    </array>
  </output>
</recipe>
